Feature: Verify Services.Email

  @APIAutomation_set1 @email @SendEmail
  Scenario: Verify Send Email
    Given I am getting existing engage record details
    #Create subscription
    When I am able to get the following endpoint and generate token for "Email"
      | url           | endpoint                 |
      | servicesEmail | services.email.sendEmail |
    And I send request to send email with below details
      | fromAddress              | messageText             | messageHtml     | subject                 | deliveryTime       | emailAddress         | friendlyName    | ccRecipients         | bccRecipients        |
      | bitbucket@prizelogic.com | Test EmailApi SendEmail | HelloPrizeLogic | Test EmailApi SendEmail | 4/20/2020 13:59:20 | sujith.s@winwire.com | Zachary Solotko | sujith.s@winwire.com | sujith.s@winwire.com |
    Then I should send email successfully

  @APIAutomation_set1 @email @SendEmail-2
  Scenario: Verify Send Email-2
    Given I am getting existing engage record details
    #Create subscription
    When I am able to get the following endpoint and generate token for "Email"
      | url           | endpoint                   |
      | servicesEmail | services.email.sendEmail-2 |
    And I send request to send emails with below details
      | fromAddress              | messageText             | messageHtml                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | subject                 | emailAddress         | friendlyName    | ccRecipients         | bccRecipients        |
      | bitbucket@prizelogic.com | Test EmailApi SendEmail | <html>\n<body>\n<style><!--\n /* Font Definitions */\n    @font-face\n        {font-family:\"Cambria Math\";\n        panose-1:2 4 5 3 5 4 6 3 2 4;}\n    @font-face\n        {font-family:Calibri;\n        panose-1:2 15 5 2 2 2 4 3 2 4;}\n    /* Style Definitions */\n    p.MsoNormal, li.MsoNormal, div.MsoNormal\n        {margin:0in;\n        margin-bottom:.0001pt;\n        font-size:12.0pt;\n        font-family:\"Calibri\",sans-serif;}\n    h2\n        {mso-style-priority:9;\n        mso-style-link:\"Heading 2 Char\";\n        mso-margin-top-alt:auto;\n        margin-right:0in;\n        mso-margin-bottom-alt:auto;\n        margin-left:0in;\n        font-size:18.0pt;\n        font-family:\"Calibri\",sans-serif;\n        font-weight:bold;}\n    a:link, span.MsoHyperlink\n        {mso-style-priority:99;\n        color:#0563C1;\n        text-decoration:underline;}\n    a:visited, span.MsoHyperlinkFollowed\n        {mso-style-priority:99;\n        color:#954F72;\n        text-decoration:underline;}\n    span.EmailStyle17\n        {mso-style-type:personal-compose;\n        font-family:\"Calibri\",sans-serif;\n        color:windowtext;}\n    span.Heading2Char\n        {mso-style-name:\"Heading 2 Char\";\n        mso-style-priority:9;\n        mso-style-link:\"Heading 2\";\n        font-family:\"Calibri\",sans-serif;\n        font-weight:bold;}\n    .MsoChpDefault\n        {mso-style-type:export-only;}\n    @page WordSection1\n        {size:8.5in 11.0in;\n        margin:1.0in 1.0in 1.0in 1.0in;}\n    div.WordSection1\n        {page:WordSection1;}\n    --></style><!--[if gte mso 9]><xml>\n    <o:shapedefaults v:ext=\"edit\" spidmax=\"1026\" />\n    </xml><![endif]--><!--[if gte mso 9]><xml>\n    <o:shapelayout v:ext=\"edit\">\n    <o:idmap v:ext=\"edit\" data=\"1\" />\n    </o:shapelayout></xml><![endif]-->\n    </head>\n    <body lang=\"EN-US\" link=\"#0563C1\" vlink=\"#954F72\">\n    <div class=\"WordSection1\">\n    <p class=\"MsoNormal\"><span style=\"font-family:&quot;Arial&quot;,sans-serif;color:#797979\">Hi {{firstName}},</span></p>\n    <p class=\"MsoNormal\"><span style=\"font-family:&quot;Arial&quot;,sans-serif;color:#797979\">&nbsp;</span></p>\n<p class=\"MsoNormal\"><span style=\"font-family:&quot;Arial&quot;,sans-serif;color:#797979\">Welcome to the Engage Platform!</span></p>\n    <p class=\"MsoNormal\"><span style=\"font-family:&quot;Arial&quot;,sans-serif;color:#797979\">&nbsp;</span></p>\n    <p class=\"MsoNormal\"><span style=\"font-family:&quot;Arial&quot;,sans-serif;color:#797979\">Engage powers PrizeLogicâ€™s incentivized engagement platform and allows brands to seamlessly combine industry-leading insights with turnkey activation to effectively motivate behavior across the consumer journey.</span></p>\n    <p class=\"MsoNormal\"><span style=\"font-family:&quot;Arial&quot;,sans-serif;color:#797979\">&nbsp;</span></p>\n    <p class=\"MsoNormal\"><span style=\"font-family:&quot;Arial&quot;,sans-serif;color:#797979\">Below are your login credentials:</span></p>\n    <p class=\"MsoNormal\"><span style=\"font-family:&quot;Arial&quot;,sans-serif;color:#797979\">&nbsp;</span></p>\n    <p class=\"MsoNormal\"><span style=\"font-family:&quot;Arial&quot;,sans-serif;color:#797979\">URL:</span><a href=\"{{engageUri}}\">{{engageUri}}</a></p>\n    <p class=\"MsoNormal\"><span style=\"font-family:&quot;Arial&quot;,sans-serif;color:#797979\">Username: {{userName}}</span></p>\n    <p class=\"MsoNormal\"><span style=\"font-family:&quot;Arial&quot;,sans-serif;color:#797979\">Password: Will be sent in a separate email</span></p>\n    <p class=\"MsoNormal\"><span style=\"font-family:&quot;Arial&quot;,sans-serif;color:#797979\">&nbsp;</span></p>\n    <p class=\"MsoNormal\"><span style=\"font-family:&quot;Arial&quot;,sans-serif;color:#797979\">On your first login you will be asked to change your password.</span></p>\n    <p class=\"MsoNormal\"><span style=\"font-family:&quot;Arial&quot;,sans-serif;color:#797979\">&nbsp;</span></p>\n    <p class=\"MsoNormal\"><span style=\"font-family:&quot;Arial&quot;,sans-serif;color:#797979\">If you have any questions or difficulties logging in, please reach out to your Customer Success Manager or Project Manager.</span></p>\n    <p class=\"MsoNormal\"><span style=\"font-family:&quot;Arial&quot;,sans-serif;color:#797979\">&nbsp;</span></p>\n    <p class=\"MsoNormal\"><span style=\"font-family:&quot;Arial&quot;,sans-serif;color:#797979\">Cheers!</span></p>\n<p class=\"MsoNormal\"><span style=\"font-family:&quot;Arial&quot;,sans-serif;color:#797979\">-Team Prizelogic</span></p>\n    </div>\n    </body>\n    </html> | Test EmailApi SendEmail | sujith.s@winwire.com | Zachary Solotko | sujith.s@winwire.com | sujith.s@winwire.com |
    Then I should send email successfully

